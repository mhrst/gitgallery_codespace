name: List Images

on: [push]

jobs:
  list-images:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout repository
        uses: actions/checkout@v2

      - name: List files in the images directory and save to a file
        run: |
          if [ -d images ]; then
            echo "Saving list of files in the images directory to images-list.txt:"
            ls web/images > assets/images-list.txt
            cat assets/images-list.txt
          else
            echo "The images directory does not exist."
          fi

      - name: Commit and push if there are changes
        run: |
          git config --local user.email "action@github.com"
          git config --local user.name "GitHub Action"
          if [ -f images-list.txt ]; then
            git add assets/images-list.txt
            git commit -m "Update images list"
            git push
          else
            echo "No images list file to commit"
          fi